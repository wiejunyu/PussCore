<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script type="text/javascript" src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
    <script src="./js/jquery.serializejson.min.js"></script>
    <script src="./js/GUID.js"></script>
    <script src="./js/jquery.cookie.js"></script>
    <script src="./js/login.js"></script>
</head>

<body>
    <form id="from">
        <input type="text" name="UserName" value="Puss" placeholder="请输入账号">
        <input type="text" name="PassWord" value="123456" placeholder="请输入密码">
        <input type="text" name="Code" placeholder="请输入验证码">
        <input type="hidden" name="CodeKey" id="CodeKey">
        <img id="imgCode" />
        <button type="button" id="btnSubmit">提交</button>
        <button type="button" id="btnGet">获取价格</button>
    </form>
    <script>
        $(function () {
            //载入验证码
            CodeKey();
        })
        //点击图片刷新验证码
        $("#imgCode").click(function () {
            CodeKey();
        });
        //登陆提交
        $("#btnSubmit").click(function () {
            Login( );
        });
        //点击获取价格
        $("#btnGet").click(function () {
            $.ajax({
                type: "POST",
                url: "http://118.89.182.215:85/api/ExpressDelivery/GetPrice?symbol=eth",
                contentType: 'application/json;charset=utf-8',
                headers: {
                    Authorization: 'Bearer ' + GetToken(),
                    Accept: "text/plain"
                },
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("Authorization", 'Bearer ' + GetToken());
                },
                success: function (data) {
                    alert(data.message);
                }
            });
        });
    </script>
</body>
</html>
